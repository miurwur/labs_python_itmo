Архитектура решения
Проект организован в виде нескольких модулей, каждый из которых решает свою задачу:

logger.py — основной модуль, содержащий реализацию параметризованного декоратора @logger. Также включает демонстрационные функции get_currencies и solve_quadratic с применением декоратора для логирования.

tests_.py — модуль с комплексными тестами, проверяющими как корректность работы функции получения курсов валют, так и функциональность самого декоратора логирования.

currencies.log — автоматически создаваемый файл журнала, куда записывается информация о всех вызовах функции get_currencies.

currencies — демонстрационный модуль, содержащий чистую реализацию функции get_currencies без логирования.

1. Универсальный декоратор логирования @logger
Разработанный декоратор @logger представляет собой гибкий инструмент для мониторинга выполнения любых функций Python. Его ключевые особенности:

Гибкая настройка вывода: Благодаря параметру handle, декоратор поддерживает два режима работы:

Запись в стандартные потоки вывода (stdout, stderr) или файловые объекты

Интеграция со встроенным модулем logging.Logger для профессионального логирования

Комплексное отслеживание: Декоратор регистрирует все важные этапы работы функции:

Начало выполнения с полной информацией о переданных аргументах

Успешное завершение с сохранением возвращаемого значения

Возникновение исключений с указанием типа ошибки и её описания

Безопасная обработка ошибок: При возникновении исключений декоратор сначала логирует информацию об ошибке, а затем гарантированно пробрасывает исключение дальше, не нарушая стандартный поток выполнения программы.

Сохранение идентичности функций: Использование functools.wraps обеспечивает сохранение оригинального имени функции, её документации и других метаданных.

2. Реализация функции get_currencies
Данная функция выполняет запрос к публичному API Центрального банка России для получения актуальных курсов валют.

Интеграция с декоратором: Функция украшена декоратором @logger(handle=file_logger), что обеспечивает автоматическое логирование всех её вызовов в файл currencies.log.

Многоуровневая обработка ошибок: Реализация включает проверки на различных уровнях:

Сетевые проблемы: обрабатываются ошибки соединения, таймауты и HTTP-ошибки

Целостность данных: проверяется корректность JSON-формата ответа

Структура ответа: валидируется наличие необходимых ключей в ответе API

Корректность данных: проверяется тип полученных значений курсов валют

Чёткая сигнатура исключений: Для каждого типа ошибки выбрасывается соответствующее исключение с понятным сообщением, что упрощает отладку и обработку ошибок в клиентском коде.

3. Демонстрационная функция solve_quadratic
Функция решения квадратного уравнения служит наглядным примером применения декоратора для логирования в консоль.

Настройка логгера: Для этой функции создан отдельный логгер quad_logger, сконфигурированный для вывода в консоль с уровнем детализации INFO.

Расширенная логика обработки: Помимо стандартного логирования через декоратор, функция включает:

Специальные проверки коэффициентов уравнения

Логирование предупреждений при отрицательном дискриминанте

Обработку граничных случаев (линейные уравнения, вырожденные случаи)

Наглядность использования: Эта функция демонстрирует, как декоратор может применяться к функциям с разной логикой и типами возвращаемых значений.

4. Система тестирования
Модуль тестирования построен по принципу разделения ответственности и проверяет все аспекты реализации.

Тестирование бизнес-логики get_currencies
Тесты используют технику мокирования для полной изоляции тестируемой функции от внешних зависимостей:

Проверяются корректные сценарии работы с валидными данными

Тестируются все предусмотренные сценарии ошибок

Убеждаемся в правильности выбрасываемых исключений и их сообщений

Проверяется обработка пограничных случаев

Тестирование декоратора @logger
Тесты декоратора разделены на несколько категорий:

Тестирование с использованием io.StringIO: Проверяется корректность формата выходных данных при работе с файлоподобными объектами. Тесты убеждаются, что:

Информация о начале и завершении функции записывается правильно

Ошибки логируются в соответствующем формате

Не происходит потери информации о переданных аргументах

Проверка проброса исключений: Важный аспект тестирования — убедиться, что декоратор не "поглощает" исключения, а только логирует их перед пробросом.

Интеграция с модулем logging: Используются mock-объекты для проверки, что декоратор корректно взаимодействует со стандартными логгерами Python, вызывая правильные методы в зависимости от ситуации.
